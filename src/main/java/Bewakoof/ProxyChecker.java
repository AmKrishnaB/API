package Bewakoof;

import io.restassured.RestAssured;
import io.restassured.config.HttpClientConfig;
import io.restassured.response.Response;

import static io.restassured.RestAssured.given;

public class ProxyChecker {
        public static void main(String[] args) {
            // List of proxies in the format "host:port"
            String[] proxies = {"189.240.60.171:9090",
                    "52.221.190.107:8888",
                    "200.25.254.193:54240",
                    "162.243.184.21:10008",
                    "115.144.254.79:28499",
                    "50.168.210.226:80",
                    "96.113.158.126:80",
                    "50.222.245.47:80",
                    "50.168.72.114:80",
                    "50.168.163.181:80",
                    "50.172.75.126:80",
                    "50.204.219.225:80",
                    "50.174.7.155:80",
                    "50.239.72.18:80",
                    "50.207.199.86:80",
                    "50.204.219.231:80",
                    "50.168.163.176:80",
                    "50.231.172.74:80",
                    "138.197.20.244:10004",
                    "82.119.96.254:80",
                    "50.168.163.179:80",
                    "50.174.7.162:80",
                    "50.168.72.118:80",
                    "50.171.32.229:80",
                    "41.207.187.178:80",
                    "50.174.7.158:80",
                    "50.218.57.64:80",
                    "50.204.219.230:80",
                    "50.174.41.66:80",
                    "50.228.141.103:80",
                    "50.218.57.68:80",
                    "50.168.210.238:80",
                    "50.171.32.225:80",
                    "50.218.57.71:80",
                    "107.1.93.219:80",
                    "50.207.199.87:80",
                    "50.173.140.147:80",
                    "50.169.37.50:80",
                    "50.239.72.16:80",
                    "164.163.185.199:8090",
                    "50.174.145.10:80",
                    "50.204.219.224:80",
                    "50.200.12.82:80",
                    "107.1.93.214:80",
                    "50.173.140.145:80",
                    "50.217.226.45:80",
                    "50.168.72.113:80",
                    "50.222.245.44:80",
                    "32.223.6.94:80",
                    "50.218.57.69:80",
                    "50.221.74.130:80",
                    "50.238.154.98:80",
                    "80.150.50.226:80",
                    "50.220.168.134:80",
                    "50.171.32.231:80",
                    "162.223.91.11:80",
                    "50.207.199.82:80",
                    "107.1.93.208:80",
                    "50.207.199.83:80",
                    "139.59.1.14:8080",
                    "50.170.90.31:80",
                    "50.228.141.99:80",
                    "66.191.31.158:80",
                    "50.228.141.100:80",
                    "50.217.226.44:80",
                    "50.228.141.96:80",
                    "50.207.199.85:80",
                    "107.1.93.222:80",
                    "221.151.181.101:8000",
                    "50.217.226.40:80",
                    "50.204.219.227:80",
                    "50.204.219.228:80",
                    "85.8.68.2:80",
                    "50.207.199.80:80",
                    "50.218.57.74:80",
                    "50.174.145.13:80",
                    "89.145.162.81:3128",
                    "50.173.140.144:80",
                    "50.174.145.12:80",
                    "50.228.141.98:80",
                    "50.230.222.202:80",
                    "107.1.93.212:80",
                    "50.170.90.28:80",
                    "50.168.163.180:80",
                    "41.230.216.70:80",
                    "0.0.0.0:80",
                    "50.223.38.6:80",
                    "50.228.141.101:80",
                    "50.222.245.42:80",
                    "50.168.72.117:80",
                    "50.217.226.42:80",
                    "50.169.135.10:80",
                    "50.171.32.228:80",
                    "202.61.204.51:80",
                    "50.222.245.43:80",
                    "96.113.159.162:80",
                    "50.200.12.85:80",
                    "50.174.145.9:80",
                    "50.222.245.50:80",
                    "2.239.213.133:3128",
                    "190.188.155.65:3128",
                    "185.16.37.34:8002",
                    "43.153.52.223:3128",
                    "104.45.128.122:80",
                    "8.9.15.85:8090",
                    "36.92.193.189:80",
                    "198.27.115.215:80",
                    "121.126.195.153:13999",
                    "213.230.107.235:8080",
                    "72.10.160.173:10677",
                    "8.219.97.248:80",
                    "103.133.221.251:80",
                    "51.75.206.209:80",
                    "117.54.114.102:80",
                    "188.235.0.207:8181",
                    "128.199.202.122:8080",
                    "8.213.137.155:1337",
                    "47.74.152.29:8888",
                    "134.209.29.120:8080",
                    "193.253.220.32:80",
                    "167.71.5.83:3128",
                    "20.24.43.214:80",
                    "138.68.60.8:8080",
                    "198.199.86.11:3128",
                    "217.182.170.224:80",
                    "20.206.106.192:80",
                    "162.223.94.164:80",
                    "46.47.197.210:3128",
                    "195.181.172.231:8082",
                    "139.162.78.109:3128",
                    "195.181.172.223:8082",
                    "47.56.110.204:8989",
                    "35.209.198.222:80",
                    "50.206.111.90:80",
                    "12.186.205.120:80",
                    "50.170.90.25:80",
                    "50.222.245.41:80",
                    "202.131.65.110:80",
                    "50.207.199.84:80",
                    "50.172.75.124:80",
                    "50.170.90.30:80",
                    "50.222.245.40:80",
                    "50.170.90.26:80",
                    "50.221.230.186:80",
                    "50.175.212.74:80",
                    "50.171.152.30:80",
                    "211.128.96.206:80",
                    "50.231.110.26:80",
                    "50.174.7.159:80",
                    "66.225.254.16:80",
                    "50.202.75.26:80",
                    "50.173.140.146:80",
                    "50.206.111.91:80",
                    "197.255.126.69:80",
                    "50.237.207.186:80",
                    "50.168.72.116:80",
                    "50.221.166.2:80",
                    "195.181.172.226:8080",
                    "195.181.172.220:8080",
                    "159.65.186.46:10002",
                    "50.170.90.34:80",
                    "20.157.194.61:80",
                    "50.174.7.154:80",
                    "143.42.163.193:80",
                    "195.23.57.78:80",
                    "50.200.12.87:80",
                    "80.120.130.231:80",
                    "50.231.104.58:80",
                    "50.174.145.11:80",
                    "78.189.150.54:1453",
                    "50.218.57.65:80",
                    "51.15.242.202:8888",
                    "50.168.72.122:80",
                    "80.228.235.6:80",
                    "68.188.59.198:80",
                    "213.143.113.82:80",
                    "50.171.32.227:80",
                    "50.174.145.8:80",
                    "84.39.112.144:3128",
                    "50.200.12.86:80",
                    "20.111.54.16:80",
                    "193.123.62.234:80",
                    "85.26.146.169:80",
                    "213.157.6.50:80",
                    "50.171.32.226:80",
                    "50.168.163.178:80",
                    "50.218.57.66:80",
                    "107.1.93.209:80",
                    "50.207.199.81:80",
                    "138.68.235.51:80",
                    "107.1.93.223:80",
                    "190.58.248.86:80",
                    "50.239.72.19:80",
                    "47.88.62.42:80",
                    "103.144.42.130:3128",
                    "186.148.182.82:999",
                    "45.201.198.41:8080",
                    "121.240.126.113:8081",
                    "45.173.12.142:1994",
                    "103.189.222.6:8080",
                    "159.203.61.169:8080",
                    "68.183.144.115:10000",
                    "183.100.14.134:8000",
                    "165.227.0.192:80",
                    "162.223.94.163:80",
                    "65.109.231.57:8080",
                    "189.240.60.164:9090",
                    "159.203.3.234:80",
                    "218.255.187.60:80",
                    "38.180.55.61:8888",
                    "49.0.253.51:21025",
                    "78.46.210.112:80",
                    "209.97.150.167:3128",
                    "47.247.136.6:8080",
                    "12.186.205.122:80",
                    "75.89.101.62:80",
                    "103.127.1.130:80",
                    "74.208.177.198:80",
                    "133.18.234.13:80",
                    "148.0.84.203:80",
                    "144.76.42.215:8118",
                    "47.243.114.192:8180",
                    "135.181.78.242:8118",
                    "130.162.224.168:1080",
                    "35.231.18.224:80",
                    "159.65.77.168:8585",
                    "110.78.141.244:8080",
                    "203.57.51.53:80",
                    "34.23.45.223:80",
                    "8.210.37.63:1234",
                    "197.243.20.186:80",
                    "162.240.75.37:80",
                    "64.227.104.87:30668",
                    "190.5.77.211:80",
                    "37.120.173.115:80",
                    "103.151.20.131:80",
                    "12.186.205.123:80",
                    "107.1.93.216:80",
                    "64.225.4.17:10005",
                    "193.200.16.44:8080",
                    "107.1.93.210:80",
                    "72.10.160.90:29129",
                    "107.1.93.213:80",
                    "50.217.226.46:80",
                    "213.33.126.130:80",
                    "62.99.138.162:80",
                    "107.1.93.221:80",
                    "221.124.53.130:8888",
                    "146.190.92.222:8888",
                    "50.235.240.86:80",
                    "67.43.228.253:14869",
                    "162.248.224.103:80",
                    "13.81.217.201:80",
                    "143.110.245.91:31000",
                    "195.114.209.50:80",
                    "198.49.68.80:80",
                    "113.161.131.43:80",
                    "67.43.228.250:18003",
                    "50.217.226.43:80",
                    "41.204.63.118:80",
                    "194.182.178.90:3128",
                    "50.168.210.234:80",
                    "162.248.225.230:80",
                    "123.30.154.171:7777",
                    "190.103.177.131:80",
                    "68.183.48.146:10006",
                    "50.204.219.229:80",
                    "23.88.59.163:80",
                    "165.0.136.30:8080",
                    "162.144.233.16:80",
                    "41.33.99.139:8080",
                    "150.107.136.110:8082",
                    "46.101.115.59:80",
                    "59.26.254.243:80",
                    "47.253.214.60:9002",
                    "110.34.3.229:3128",
                    "64.225.4.81:10004",
                    "192.177.75.45:80",
                    "94.100.26.202:80",
                    "158.69.53.98:9300",
                    "103.190.16.175:8080",
                    "159.223.136.87:3128",
                    "189.240.60.168:9090",
                    "81.169.226.197:8888",
                    "47.74.226.8:5001",
                    "164.132.170.100:80",
                    "176.235.182.99:8080",
                    "193.15.14.198:80",
                    "49.0.250.196:8080",
                    "148.123.47.20:8080",
                    "185.217.143.96:80",
                    "49.228.131.169:5000",
                    "213.33.2.28:80",
                    "50.206.111.88:80",
                    "50.168.210.235:80",
                    "1.224.3.122:3889",
                    "178.128.200.87:80",
                    "116.203.28.43:80",
                    "129.150.39.9:80",
                    "50.122.86.118:80"};


            for (String proxyString : proxies) {
                try {
                    // Split the proxy string into host and port
                    String[] proxyParts = proxyString.split(":");
                    String proxyHost = proxyParts[0];
                    int proxyPort = Integer.parseInt(proxyParts[1]);

                    // Set the proxy
                    RestAssured.proxy(proxyHost, proxyPort);

                    // Rest of your code
                    RestAssured.baseURI = "https://www.bewakoof.com/v1/carts/apply_coupon?wallet_applied=true";

                    String requestBody="{\n" +
                            "    \"param\": \"apply_coupon\",\n" +
                            "    \"cart\": {\n" +
                            "        \"coupon\": \"BWKFWV5AGFTR500\"\n" +
                            "    }\n" +
                            "}";

                    RestAssured.config().httpClient(HttpClientConfig.httpClientConfig().setParam("http.connection.timeout", 10000 ));

                    Response response=given()
                            .header("Ab-Id","60")
                            .header("Accept","*/*")
                            .header("Accept-Encoding","gzip, deflate, br")
                            .header("Accept-Language","en-GB,en-US;q=0.9,en;q=0.8,hi;q=0.7,mr;q=0.6")
                            .header("Access-Token","M2QxNmQ3NWEyNjQ2NGNjZGI1MWNlYzYyMTVjMGQ2ZjI6YmhheWVrYXIzQGdtYWlsLmNvbQ==")
                            .header("Api-Token","MWY5ZTNmNzFmN2M1ZTUyMjkwNjM2NGMzNmNjZTA3N2Q6M2RhMmI3OTgtNTY2MC00ZDRhLWJhZWQtNTZlMDI2MWRlYmZm")
                            .header("Client-Device-Token","MWY5ZTNmNzFmN2M1ZTUyMjkwNjM2NGMzNmNjZTA3N2Q6M2RhMmI3OTgtNTY2MC00ZDRhLWJhZWQtNTZlMDI2MWRlYmZm")
                            //.header("Content-Length","60")
                            .header("Content-Type","application/json")
                            .header("Cookie","_gcl_au=1.1.1298881265.1702560355; _gid=GA1.2.1496931767.1702560356; _scid=c8292ab1-7b0e-4587-a5fc-39528e39aea4; _sctr=1%7C1702492200000; jwt_token=eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxMjUzOTA3NywiZXhwIjoxNzAzMTY1MTkyfQ.2yCf9nqm7P2Il02uL7QgCTPudV4n7XLhVBymmqDAbAw; WZRK_G=fa18433663a74912b8a4ff1a49123de5; userType=new_user_score; isMember=false; abId=60; isNewUser=true; _scid_r=c8292ab1-7b0e-4587-a5fc-39528e39aea4; _ga=GA1.1.136487986.1702560356; _gat=1; WZRK_S_8R9-845-Z84Z=%7B%22p%22%3A1%2C%22s%22%3A1702575699%2C%22t%22%3A1702575699%7D; _ga_H9S2VC0HED=GS1.1.1702575699.3.1.1702575741.18.0.0")
                            .header("Dnt","1")
                            .header("Isbshotsapp","false")
                            .header("Microapp","")
                            .header("Newrelic","eyJ2IjpbMCwxXSwiZCI6eyJ0eSI6IkJyb3dzZXIiLCJhYyI6IjI1NjM0MTMiLCJhcCI6IjExMzQwODMwMDkiLCJpZCI6IjBlNzg0NDUyNjBkMWJhNTEiLCJ0ciI6Ijg2ZjRiNTc4ZGY2ZjVhM2Q4NGE1MjE0MzhlZWE3ZjAwIiwidGkiOjE3MDI1NzU3NTM3NDh9fQ==")
                            .header("Origin","https","//www.bewakoof.com")
                            .header("Preferred-Location","IN")
                            .header("Referer","https","//www.bewakoof.com/cart")
                            .header("Sec-Ch-Ua","\"Not_A Brand\";v=\"8\", \"Chromium\";v=\"120\", \"Google Chrome\";v=\"120\"")
                            .header("Sec-Ch-Ua-Mobile","?0")
                            .header("Sec-Ch-Ua-Platform","\"Windows\"")
                            .header("Sec-Fetch-Dest","empty")
                            .header("Sec-Fetch-Mode","cors")
                            .header("Sec-Fetch-Site","same-origin")
                            .header("Switch-Platform","false")
                            .header("Token","3d16d75a26464ccdb51cec6215c0d6f2")
                            .header("Traceparent","00-86f4b578df6f5a3d84a521438eea7f00-0e78445260d1ba51-01")
                            .header("Tracestate","2563413@nr=0-1-2563413-1134083009-0e78445260d1ba51----1702575753748")
                            .header("User-Agent","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36")
                            .header("X-Http-Method-Override","PATCH")
                            .header("X-Newrelic-Id","VgMBUlJSCxABVFRSBQIBUFUE")
                            .header("X-Requested-With","XMLHttpRequest")
                            .body(requestBody).
                            when().post().
                            then().extract().response();

                    // Print the response details
                    String responseBody = response.getBody().asString();
                    int responseStatus = response.getStatusCode();
                    System.out.println("Proxy: " + proxyString + " - " + responseBody + " - " + responseStatus);

                    // Check if the response code is 200
                    if (responseStatus == 200) {
                        // Call the method to write to CSV
                        CsvWriter.writeToCSV("C:/Users/bhaye/Downloads/WorkingProxy.csv", proxyString);
                    }

                } catch (Exception e) {
                    // Handle proxy-related exceptions
                    System.out.println("Proxy " + proxyString + " error: " + e.getMessage());
                }
            }
        }
    }
