package Bewakoof;

import io.restassured.RestAssured;
import io.restassured.config.HttpClientConfig;
import io.restassured.response.Response;

import static io.restassured.RestAssured.given;

public class ProxyChecker {
        public static void main(String[] args) {
            // List of proxies in the format "host:port"
            String[] proxies = {"103.47.93.231:1080",
                    "41.60.233.192:8080",
                    "211.194.214.128:9050",
                    "188.166.220.186:50001",
                    "92.222.237.95:8898",
                    "196.44.184.138:5678",
                    "168.205.217.41:4145",
                    "78.137.58.119:5678",
                    "80.30.105.12:58888",
                    "172.67.69.9:80",
                    "49.48.47.72:8080",
                    "106.14.207.142:8081",
                    "119.2.54.25:5678",
                    "5.9.141.151:30000",
                    "177.38.5.21:4153",
                    "206.189.140.176:21657",
                    "103.47.93.247:1080",
                    "202.107.231.156:60000",
                    "103.141.148.62:5678",
                    "165.227.112.138:1080",
                    "202.148.22.106:5678",
                    "27.123.1.33:4153",
                    "69.161.21.126:3128",
                    "8.219.11.125:443",
                    "23.227.38.198:80",
                    "104.129.205.25:54321",
                    "178.212.53.3:1080",
                    "180.210.222.205:1080",
                    "103.47.93.218:1080",
                    "197.234.13.29:4145",
                    "182.160.5.234:1080",
                    "197.234.13.14:4145",
                    "177.38.5.234:4153",
                    "106.75.174.172:999",
                    "103.59.203.209:4145",
                    "2.139.2.212:4145",
                    "161.35.125.167:7497",
                    "190.109.72.10:33633",
                    "45.70.237.146:4145",
                    "36.91.117.59:5678",
                    "208.113.155.176:12886",
                    "186.251.255.113:31337",
                    "202.142.181.162:8080",
                    "203.30.188.247:80",
                    "185.46.218.196:5678",
                    "14.207.24.72:8080",
                    "202.124.43.254:4145",
                    "185.5.246.222:4153",
                    "45.125.222.97:47239",
                    "103.47.93.113:13405",
                    "45.4.85.150:5678",
                    "103.119.55.155:8080",
                    "103.214.54.90:8080",
                    "104.17.197.90:2057",
                    "161.35.188.95:3128",
                    "36.90.62.85:4145",
                    "128.199.150.158:3128",
                    "104.17.50.45:80",
                    "91.134.157.82:15220",
                    "59.59.51.74:8001",
                    "197.155.115.46:5678",
                    "36.89.85.49:5678",
                    "169.255.139.5:60279",
                    "202.129.52.172:4153",
                    "49.51.22.107:443",
                    "47.242.155.132:10900",
                    "164.132.68.216:8888",
                    "185.161.186.84:54321",
                    "194.195.240.60:54210",
                    "78.90.92.28:5678",
                    "138.118.213.213:4153",
                    "121.205.69.243:21212",
                    "201.121.249.246:8080",
                    "101.109.170.182:4145",
                    "182.120.161.228:8080",
                    "188.56.218.41:3128",
                    "177.38.5.250:4153",
                    "193.106.57.96:5678",
                    "119.18.152.30:8080",
                    "218.1.200.244:57114",
                    "89.161.89.20:5678",
                    "46.209.22.250:3629",
                    "165.90.60.73:4145",
                    "46.98.204.56:5678",
                    "110.78.81.107:5678",
                    "103.60.187.1:60189",
                    "110.78.149.235:4145",
                    "103.79.96.189:4153",
                    "58.220.69.212:26589",
                    "70.32.26.23:36546",
                    "177.125.161.223:4145",
                    "185.125.253.218:1080",
                    "187.86.129.132:63253",
                    "182.253.173.18:4153",
                    "169.255.136.8:60279",
                    "140.250.148.19:1080",
                    "49.83.98.16:4134",
                    "139.162.100.214:18199",
                    "104.255.170.66:50109",
                    "172.67.3.108:80",
                    "104.23.141.196:80",
                    "103.3.77.204:5678",
                    "197.245.36.213:5678",
                    "119.17.192.97:1080",
                    "1.20.137.82:32241",
                    "8.42.68.249:39593",
                    "36.92.177.9:1081",
                    "91.224.179.175:5678",
                    "117.158.175.21:7302",
                    "155.93.255.137:4153",
                    "80.210.37.4:1080",
                    "150.230.96.150:19291",
                    "177.72.82.47:4153",
                    "180.241.158.221:8085",
                    "154.66.108.9:10081",
                    "116.9.163.205:5678",
                    "103.70.159.154:5678",
                    "39.108.113.204:20000",
                    "124.41.240.140:59964",
                    "178.212.65.61:3629",
                    "45.233.0.1:26730",
                    "183.89.148.233:8080",
                    "202.163.72.74:4153",
                    "185.233.202.110:8088",
                    "190.106.203.86:5678",
                    "51.81.122.151:62611",
                    "185.6.8.108:19427",
                    "69.245.21.126:80",
                    "77.46.153.185:5678",
                    "103.79.96.225:4153",
                    "59.32.37.90:3128",
                    "122.53.82.126:4145",
                    "89.237.33.97:51549",
                    "103.38.205.17:5678",
                    "202.159.35.97:443",
                    "172.67.181.11:80",
                    "177.38.5.230:4153",
                    "41.242.66.74:5678",
                    "175.173.221.229:28643",
                    "23.94.73.177:22429",
                    "142.4.207.10:48012",
                    "182.160.116.194:8090",
                    "104.129.206.65:8800",
                    "103.82.11.237:4153",
                    "45.70.30.196:5566",
                    "36.90.63.55:4145",
                    "181.113.34.86:48024",
                    "103.70.206.129:59311",
                    "103.120.133.141:5678",
                    "213.16.81.147:5678",
                    "175.100.72.95:55360",
                    "171.5.13.78:4145",
                    "197.234.13.23:4145",
                    "165.225.24.50:10007",
                    "218.185.242.117:9050",
                    "184.82.234.155:8888",
                    "182.54.148.1:4145",
                    "138.97.0.66:4145",
                    "78.186.98.171:1080",
                    "101.108.165.70:4145",
                    "190.120.249.149:4145",
                    "1.55.241.4:4145",
                    "93.171.224.51:4153",
                    "177.38.5.51:4153",
                    "103.59.203.177:4145",
                    "43.153.171.204:443",
                    "45.174.248.1:999",
                    "212.69.12.81:1080",
                    "203.22.223.12:80",
                    "104.21.6.88:80",
                    "202.6.233.59:7878",
                    "101.109.252.86:4145",
                    "186.126.42.127:1080",
                    "170.81.160.124:42832",
                    "14.34.137.10:3128",
                    "45.8.105.194:80",
                    "104.16.241.204:80",
                    "197.234.13.11:4145",
                    "172.67.182.96:80",
                    "103.12.246.33:4145",
                    "128.199.175.145:443",
                    "159.65.116.119:30199",
                    "106.75.134.183:999",
                    "51.89.16.111:49528",
                    "103.79.96.205:4153",
                    "185.162.229.70:80",
                    "36.66.36.252:4153",
                    "186.224.225.26:42648",
                    "180.120.79.221:44844",
                    "27.156.192.8:4134",
                    "140.250.144.18:1080",
                    "85.159.104.220:4153",
                    "103.70.206.17:59311",
                    "114.234.106.166:5678",
                    "104.16.213.202:80",
                    "128.14.226.130:60080",
                    "217.182.183.154:7497",
                    "43.153.172.76:443",
                    "104.17.2.81:104",
                    "103.73.74.180:1080",
                    "51.75.173.161:1080",
                    "185.66.59.197:42647",
                    "38.127.172.198:11537",
                    "116.58.227.73:4145",
                    "190.2.144.46:18013",
                    "14.207.123.29:8080",
                    "103.47.93.200:1080",
                    "186.251.255.45:31337",
                    "89.237.34.193:51549",
                    "167.99.182.227:39031",
                    "62.112.194.224:26057",
                    "8.219.150.127:443",
                    "102.64.116.97:4145",
                    "103.82.11.233:4153",
                    "197.235.15.249:4153",
                    "103.86.200.48:5678",
                    "43.225.163.209:4153",
                    "31.204.28.20:20937",
                    "190.14.229.242:5678",
                    "186.251.248.15:31337",
                    "103.47.93.213:1080",
                    "121.4.166.166:38080",
                    "195.210.172.43:58350",
                    "107.174.121.140:3128",
                    "103.47.93.201:1080",
                    "212.200.89.10:4153",
                    "91.215.61.181:5678",
                    "160.202.41.194:4153",
                    "185.171.54.29:4153",
                    "223.25.98.82:5678",
                    "113.99.188.254:4153",
                    "200.29.8.18:5678",
                    "194.113.104.148:3600",
                    "179.107.51.78:4153",
                    "178.252.197.64:4153",
                    "46.21.240.185:1080",
                    "172.104.154.229:1082",
                    "185.202.113.232:3001",
                    "77.85.104.54:1080",
                    "103.58.16.233:4145",
                    "156.239.144.149:10001",
                    "172.96.172.149:59400",
                    "104.238.96.101:31212",
                    "168.227.158.61:4145",
                    "99.26.234.177:5678",
                    "1.0.0.187:80",
                    "195.93.200.140:80",
                    "94.228.253.51:4145",
                    "175.100.87.209:5678",
                    "89.25.23.210:41313",
                    "103.211.8.189:44581",
                    "103.66.233.185:4145",
                    "51.178.25.239:9050",
                    "14.248.94.123:5678",
                    "104.24.136.68:80",
                    "158.181.138.19:8081",
                    "103.47.93.227:1080",
                    "177.128.18.27:5678",
                    "36.37.71.83:5430",
                    "80.229.194.203:4153",
                    "116.58.227.224:4145",
                    "87.250.109.174:8080",
                    "45.112.125.59:4145",
                    "100.36.158.82:8888",
                    "149.20.253.40:12551",
                    "45.14.224.32:28145",
                    "119.148.16.93:1088",
                    "157.185.173.217:26589",
                    "103.117.109.5:4153",
                    "202.166.192.84:5678",
                    "201.65.121.66:4145",
                    "152.32.186.145:1080",
                    "165.22.209.96:25150",
                    "103.47.93.225:1080",
                    "185.189.208.65:4153",
                    "80.122.170.182:4153",
                    "36.89.17.211:5678",
                    "186.251.255.21:31337",
                    "129.226.212.217:443",
                    "202.92.4.113:35528",
                    "172.104.251.179:80",
                    "137.220.61.187:10024",
                    "116.212.142.231:33427",
                    "177.125.206.40:4145",
                    "125.141.139.110:5566",
                    "92.42.249.58:10801",
                    "211.174.110.215:4153",
                    "117.54.201.94:5678",
                    "36.255.104.17:1080",
                    "221.167.75.138:5156",
                    "103.47.93.220:1080",
                    "125.108.101.35:9000",
                    "147.139.199.251:61524",
                    "103.44.15.193:4145",
                    "138.197.208.93:8080",
                    "110.78.148.198:4145",
                    "202.153.91.165:1080",
                    "43.246.143.250:9999",
                    "103.126.87.25:1080",
                    "190.104.26.227:33638",
                    "143.198.237.236:9050",
                    "45.77.153.183:10284",
                    "120.26.68.107:80",
                    "51.15.187.125:5836",
                    "45.196.150.46:5432",
                    "150.158.135.201:24289",
                    "103.66.233.225:4145",
                    "197.234.13.54:4145",
                    "103.196.136.158:7497",
                    "203.22.223.47:80",
                    "171.100.22.133:5678",
                    "101.43.191.233:2080",
                    "104.255.170.89:51676",
                    "101.109.23.73:4145",
                    "182.160.125.148:8080",
                    "136.143.144.187:5678",
                    "177.38.5.33:4153",
                    "111.91.231.65:4153",
                    "172.67.127.188:80",
                    "83.168.84.134:4153",
                    "212.5.143.42:3366",
                    "89.132.207.82:4145",
                    "45.63.64.66:1080",
                    "168.227.158.25:4145",
                    "159.138.43.96:1080",
                    "192.163.252.85:52119",
                    "103.82.20.108:51980",
                    "217.20.189.149:5678",
                    "77.235.28.229:4153",
                    "161.97.156.209:29118",
                    "5.9.14.21:30000",
                    "36.94.234.177:5678",
                    "217.115.115.253:56792",
                    "177.200.2.96:5678",
                    "186.211.110.178:32346",
                    "80.82.147.5:4153",
                    "103.109.56.209:15108",
                    "181.115.152.114:4153",
                    "61.7.138.71:4145",
                    "109.236.47.242:4145",
                    "143.244.140.236:8444",
                    "202.159.35.57:443",
                    "176.215.237.166:5678",
                    "188.169.84.30:5678",
                    "121.205.69.62:21212",
                    "103.39.236.205:8080",
                    "103.194.89.173:9898",
                    "183.89.249.192:4153",
                    "143.202.227.51:4145",
                    "103.140.205.133:1080",
                    "35.190.107.16:30000",
                    "147.182.229.154:7497",
                    "122.3.255.114:4145",
                    "83.171.112.77:12389",
                    "104.129.192.34:8800",
                    "109.69.0.247:8741",
                    "103.51.46.2:4145",
                    "212.83.182.139:5836",
                    "198.8.94.174:39078",
                    "178.150.113.211:1080",
                    "46.175.4.76:39574",
                    "116.58.232.226:4145",
                    "18.217.169.2:80",
                    "103.113.3.236:4145",
                    "103.15.245.18:4153",
                    "162.255.110.52:5678",
                    "104.16.105.15:80",
                    "136.243.174.243:1080",
                    "203.24.109.130:80",
                    "82.115.18.179:1080",
                    "104.27.37.131:80",
                    "178.128.119.195:3128",
                    "103.51.44.253:4145",
                    "103.130.112.253:5678",
                    "185.169.181.26:4145",
                    "51.68.125.26:7497",
                    "104.21.223.181:80",
                    "157.185.165.110:26589",
                    "181.143.69.227:5678",
                    "190.214.50.158:55617",
                    "188.165.196.197:56691",
                    "5.8.240.90:4153",
                    "202.150.1.87:80",
                    "180.120.179.118:44844",
                    "5.189.140.102:7497",
                    "190.96.97.170:5678",
                    "103.212.93.201:45639",
                    "123.200.2.122:5678",
                    "138.97.0.87:4145",
                    "201.48.125.221:4153",
                    "103.208.200.222:4670",
                    "180.211.158.90:5678",
                    "139.162.196.67:60586",
                    "110.34.166.185:4153",
                    "50.47.75.211:5678",
                    "119.18.152.139:4145",
                    "49.48.34.223:4145",
                    "173.236.184.128:10654",
                    "49.0.42.114:10801",
                    "221.2.84.42:10800",
                    "192.12.112.70:4145",
                    "218.1.142.117:57114",
                    "103.47.93.236:1080",
                    "165.227.139.174:53913",
                    "192.12.113.249:4145",
                    "186.226.145.228:4145",
                    "101.42.116.41:10809",
                    "103.94.133.93:4153",
                    "103.199.158.97:41610",
                    "129.21.30.116:3128",
                    "83.168.84.130:4153",
                    "51.77.65.164:31979",
                    "34.102.179.21:80",
                    "5.135.178.11:11624",
                    "1.0.154.228:4145",
                    "208.113.153.30:46293",
                    "118.174.219.171:4153",
                    "69.163.160.228:23787",
                    "46.98.247.92:1080",
                    "38.127.172.169:54291",
                    "210.213.90.26:8080",
                    "36.66.16.23:5678",
                    "103.47.92.33:1080",
                    "203.32.121.161:80",
                    "119.82.226.232:7497",
                    "177.131.29.211:4153",
                    "200.81.144.1:1080",
                    "51.159.105.70:8080",
                    "177.36.185.178:5678",
                    "96.9.86.218:5678",
                    "113.74.26.116:4145",
                    "45.63.70.67:29313",
                    "177.125.206.169:4145",
                    "187.73.55.66:5678",
                    "8.210.119.213:3304",
                    "103.113.12.90:4673",
                    "216.73.159.18:13201",
                    "200.33.152.253:4153",
                    "185.16.12.137:5678",
                    "159.89.138.130:80",
                    "46.227.37.1:1088",
                    "5.56.103.45:45747",
                    "103.101.228.254:5678",
                    "109.73.176.20:4145",
                    "5.160.168.134:5678",
                    "91.148.233.54:8081",
                    "123.114.207.105:8118",
                    "43.242.242.140:5678",
                    "103.26.247.102:56707",
                    "203.119.147.187:80",
                    "95.216.181.107:9080",
                    "201.236.248.250:5678",
                    "103.52.211.118:80",
                    "51.254.49.255:52407",
                    "49.51.74.61:21127",
                    "38.127.172.186:174",
                    "104.24.206.207:13335",
                    "188.114.99.37:80",
                    "149.28.13.113:10786",
                    "188.255.218.246:1080",
                    "103.76.188.33:4153",
                    "173.255.202.28:39319",
                    "104.22.14.48:80",
                    "177.12.178.249:4153",
                    "202.53.172.76:5678",
                    "192.241.205.63:60092",
                    "176.122.117.12:45806",
                    "167.172.23.19:64065",
                    "177.8.170.122:1080",
                    "196.44.181.37:5678",
                    "117.241.135.33:5678",
                    "201.251.155.249:5678",
                    "160.226.203.247:1080",
                    "203.24.108.179:80",
                    "113.161.175.177:5678",
                    "103.240.33.249:8291",
                    "202.191.15.253:4145",
                    "5.189.133.192:50893",
                    "135.125.56.179:25165",
                    "177.223.224.17:4153",
                    "185.162.95.125:10001",
                    "94.240.198.202:5678",
                    "149.20.253.51:12551",
                    "50.62.57.97:43879",
                    "5.39.19.154:33427",
                    "44.190.9.101:48100",
                    "122.152.55.141:5678",
                    "184.174.75.86:51724",
                    "1.0.136.60:4145",
                    "180.122.144.254:1080",
                    "173.212.224.116:50886",
                    "185.172.129.13:7497",
                    "62.179.9.19:6830",
                    "114.88.100.108:57114",
                    "180.211.191.38:5678",
                    "187.115.3.186:5678",
                    "58.32.17.102:2080",
                    "103.199.97.33:39825",
                    "8.42.71.5:39593",
                    "46.227.37.21:1088"};


            for (String proxyString : proxies) {
                try {
                    // Split the proxy string into host and port
                    String[] proxyParts = proxyString.split(":");
                    String proxyHost = proxyParts[0];
                    int proxyPort = Integer.parseInt(proxyParts[1]);

                    // Set the proxy
                    RestAssured.proxy(proxyHost, proxyPort);

                    // Rest of your code
                    RestAssured.baseURI = "https://www.bewakoof.com/v1/carts/apply_coupon?wallet_applied=true";

                    String requestBody="{\n" +
                            "    \"param\": \"apply_coupon\",\n" +
                            "    \"cart\": {\n" +
                            "        \"coupon\": \"BWKFWV5AGFTR500\"\n" +
                            "    }\n" +
                            "}";

                    RestAssured.config().httpClient(HttpClientConfig.httpClientConfig().setParam("http.connection.timeout", 10000 ));

                    Response response=given()
                            .header("Ab-Id","60")
                            .header("Accept","*/*")
                            .header("Accept-Encoding","gzip, deflate, br")
                            .header("Accept-Language","en-GB,en-US;q=0.9,en;q=0.8,hi;q=0.7,mr;q=0.6")
                            .header("Access-Token","M2QxNmQ3NWEyNjQ2NGNjZGI1MWNlYzYyMTVjMGQ2ZjI6YmhheWVrYXIzQGdtYWlsLmNvbQ==")
                            .header("Api-Token","MWY5ZTNmNzFmN2M1ZTUyMjkwNjM2NGMzNmNjZTA3N2Q6M2RhMmI3OTgtNTY2MC00ZDRhLWJhZWQtNTZlMDI2MWRlYmZm")
                            .header("Client-Device-Token","MWY5ZTNmNzFmN2M1ZTUyMjkwNjM2NGMzNmNjZTA3N2Q6M2RhMmI3OTgtNTY2MC00ZDRhLWJhZWQtNTZlMDI2MWRlYmZm")
                            //.header("Content-Length","60")
                            .header("Content-Type","application/json")
                            .header("Cookie","_gcl_au=1.1.1298881265.1702560355; _gid=GA1.2.1496931767.1702560356; _scid=c8292ab1-7b0e-4587-a5fc-39528e39aea4; _sctr=1%7C1702492200000; jwt_token=eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxMjUzOTA3NywiZXhwIjoxNzAzMTY1MTkyfQ.2yCf9nqm7P2Il02uL7QgCTPudV4n7XLhVBymmqDAbAw; WZRK_G=fa18433663a74912b8a4ff1a49123de5; userType=new_user_score; isMember=false; abId=60; isNewUser=true; _scid_r=c8292ab1-7b0e-4587-a5fc-39528e39aea4; _ga=GA1.1.136487986.1702560356; _gat=1; WZRK_S_8R9-845-Z84Z=%7B%22p%22%3A1%2C%22s%22%3A1702575699%2C%22t%22%3A1702575699%7D; _ga_H9S2VC0HED=GS1.1.1702575699.3.1.1702575741.18.0.0")
                            .header("Dnt","1")
                            .header("Isbshotsapp","false")
                            .header("Microapp","")
                            .header("Newrelic","eyJ2IjpbMCwxXSwiZCI6eyJ0eSI6IkJyb3dzZXIiLCJhYyI6IjI1NjM0MTMiLCJhcCI6IjExMzQwODMwMDkiLCJpZCI6IjBlNzg0NDUyNjBkMWJhNTEiLCJ0ciI6Ijg2ZjRiNTc4ZGY2ZjVhM2Q4NGE1MjE0MzhlZWE3ZjAwIiwidGkiOjE3MDI1NzU3NTM3NDh9fQ==")
                            .header("Origin","https","//www.bewakoof.com")
                            .header("Preferred-Location","IN")
                            .header("Referer","https","//www.bewakoof.com/cart")
                            .header("Sec-Ch-Ua","\"Not_A Brand\";v=\"8\", \"Chromium\";v=\"120\", \"Google Chrome\";v=\"120\"")
                            .header("Sec-Ch-Ua-Mobile","?0")
                            .header("Sec-Ch-Ua-Platform","\"Windows\"")
                            .header("Sec-Fetch-Dest","empty")
                            .header("Sec-Fetch-Mode","cors")
                            .header("Sec-Fetch-Site","same-origin")
                            .header("Switch-Platform","false")
                            .header("Token","3d16d75a26464ccdb51cec6215c0d6f2")
                            .header("Traceparent","00-86f4b578df6f5a3d84a521438eea7f00-0e78445260d1ba51-01")
                            .header("Tracestate","2563413@nr=0-1-2563413-1134083009-0e78445260d1ba51----1702575753748")
                            .header("User-Agent","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36")
                            .header("X-Http-Method-Override","PATCH")
                            .header("X-Newrelic-Id","VgMBUlJSCxABVFRSBQIBUFUE")
                            .header("X-Requested-With","XMLHttpRequest")
                            .body(requestBody).
                            when().post().
                            then().extract().response();

                    // Print the response details
                    String responseBody = response.getBody().asString();
                    int responseStatus = response.getStatusCode();
                    System.out.println("Proxy: " + proxyString + " - " + responseBody + " - " + responseStatus);

                    // Check if the response code is 200
                    if (responseStatus == 200) {
                        // Call the method to write to CSV
                        CsvWriter.writeToCSV("C:/Users/bhaye/Downloads/WorkingProxy.csv", proxyString);
                    }

                } catch (Exception e) {
                    // Handle proxy-related exceptions
                    System.out.println("Proxy " + proxyString + " error: " + e.getMessage());
                }
            }
        }
    }
